<!DOCTYPE html>
<html>
	<head>

		<meta charset="UTF-8">
		<title>Syncretic Project</title>
		<style>
			.onButton {
				width: 50px;
				height: 50px;
			}
			.offButton {
				width: 50px;
				height: 50px;
			}
		</style>
	</head>
	<body>

		<!-- Led Control -->
		<div class='LED-Control'>
			<h2>Control LED</h2>
			<div class='LED-Buttons'>
				<form action='#' method='POST'>
					<button class='onButton' onclick="ledOn()" name="on" value="on">On</button>
					<button class='offButton' onclick="ledOff()" name="off" value="off">Off</button>
				</form>
			</div>
		</div>
			<!-- LED Status -->
		<div>
			<h2>Status LED: </h2>
			<p>{{led_status}}</p>
		</div>

			<!-- Temp sensor -->
		<div>
			<h2>Temperatura si Umiditatea</h2>
			<p>{{temp}}</p>
		</div>

			<!-- Message Input -->
		<div>
			<h2>Scrie mesaj:</h2>
			<form action="#" method="POST">
				<input type="text" name="message" id="messageInput">
				<button type="submit">Salveaza mesaj</button>
			</form>
		</div>

		<script>
			function sendMessage() {
				var message = document.getElementById('messageInput').value;
				fetch('/save_message', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify({ message: message })
				})
				.then(response => {
					if (response.ok) {
						console.log('Message saved successfully');
					} else {
						console.error('Failed to save message');
					}
				})
				.catch(error => {
					console.error('Error:', error);
				});
			}
		</script>

			<!-- Display Messages -->
		<div>
			<h2>Mesaje:</h2>
			<ul>
				{% for message in messages %}
				<li>{{ message }}</li>
				{% endfor %}
			</ul>
		</div>
	</body>
</html>